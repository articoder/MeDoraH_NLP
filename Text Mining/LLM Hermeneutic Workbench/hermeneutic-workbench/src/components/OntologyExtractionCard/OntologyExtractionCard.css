/**
 * OntologyExtractionCard Styles - Modern OpenAI-inspired Design
 * Clean, minimal, typography-focused with color-coded certainty
 */

/* =============================================================================
   CARD CONTAINER
   ============================================================================= */
.ontology-card {
    background-color: var(--bg-primary);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-main);
    margin-bottom: var(--sp-6);
    padding: var(--sp-6);
    box-shadow: var(--shadow-sm);
    transition: box-shadow 0.2s ease;
}

.ontology-card:hover {
    box-shadow: var(--shadow-md);
}

.ontology-card.empty-state {
    text-align: center;
    color: var(--fg-secondary);
    font-style: italic;
}

/* =============================================================================
   EXTRACTION LAYOUT
   ============================================================================= */
.ontology-extraction {
    display: flex;
    flex-direction: column;
    gap: var(--sp-5);
}



/* =============================================================================
   TRIPLE VISUALIZATION (Unified Premium Grid)
   ============================================================================= */
.unified-triple-box {
    background-color: var(--bg-entitybox);
    border: 1px solid var(--border-entitybox);
    /* Slightly tighter radius for a more structured look */
    border-radius: 35px;
    /* Reduced vertical padding to compact the box per user feedback */
    padding: var(--sp-3) var(--sp-5);
    display: flex;
    flex-direction: column;
    gap: var(--sp-1);
    /* Subtle inner shadow for depth */
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.01);
    position: relative;
    /* For absolute positioning of ID */
}

.id-tag-floating {
    position: absolute;
    bottom: var(--sp-1);
    right: var(--sp-5);
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--fg-secondary);
    opacity: 0.6;
    letter-spacing: 0.5px;
}

/* 
 * Single Grid Container for Perfect Alignment 
 * Columns: Subject (1fr) | ArrowL (40px) | Relation (auto) | ArrowR (40px) | Object (1fr)
 */
.triple-grid-container {
    display: grid;
    grid-template-columns: 1fr 40px auto 40px 1fr;
    align-items: center;
    gap: var(--sp-1) 0;
    /* Vertical gap only */
    width: 100%;
}

.grid-cell {
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Row Assignments */
.top-left,
.top-center,
.top-right {
    grid-row: 1;
}

.middle-left,
.middle-center,
.middle-right {
    grid-row: 2;
}

.bottom-left,
.bottom-center,
.bottom-right {
    grid-row: 3;
}

/* Column Assignments */
.subject-cell {
    grid-column: 1;
}

.relation-cell {
    grid-column: 3;
}

.object-cell {
    grid-column: 5;
}

/* Middle Row specific placement for arrows */
.middle-left {
    grid-column: 2;
}

.middle-center {
    grid-column: 3;
}

.middle-right {
    grid-column: 4;
}

/* Relation Column: Ensure min width but allow expansion */
.relation-cell {
    min-width: 140px;
}

/* Visual Connector Row (Middle) */
.connector-arrow {
    color: var(--border-secondary);
    font-size: 10px;
    opacity: 0.5;
    padding: 2px 0;
}

.connector-arrow-horizontal {
    color: #363b3b;
    font-size: 14px;
    font-weight: 600;
    opacity: 1;
    margin-top: -2px;
    /* Visual tweak to align with center of text better */
}

/* Top Row Styles */
.entity-name {
    font-size: var(--fs-lg);
    font-weight: 700;
    color: var(--fg-primary);
    text-align: center;
    /* Allow wrapping for long names when window is narrow */
    white-space: normal;
    word-break: break-word;
    line-height: 1.3;
    letter-spacing: -0.01em;
}

.surface-text-inline {
    font-family: var(--font-mono);
    font-size: 0.8rem;
    color: var(--fg-secondary);
    background: transparent;
    /* Cleaner look inside the white box */
    padding: 2px 8px;
    border-radius: var(--radius-inline);
    border: 1px dashed var(--border-secondary);
}

/* Bottom Row Styles */
.relation-property {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--accent);
    background-color: var(--accent-bg-subtle);
    padding: 3px 10px;
    border-radius: var(--radius-inline);
}

.negation-indicator {
    color: #ef4444;
    font-weight: 700;
    margin-right: 4px;
}

/* Mapping badge - Outlined pill-style with colored text */
.mapping-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: var(--fs-xs);
    font-weight: 600;
    padding: calc(var(--sp-1) - 1px) var(--sp-2);
    border-radius: var(--radius-pill);
    background-color: #FFFFFF;
    border: 1px solid #8B93A6;
    white-space: nowrap;
    /* Color is set dynamically via inline style */
}

/* Specific colors are now handled dynamically via inline styles based on ontology class hierarchy */
/* See src/lib/ontologyUtils.ts and getOntologyColor() usage */



/* =============================================================================
   EPISTEMIC STANCE - Inline Row with Color-Coded Certainty
   ============================================================================= */
.epistemic-row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--sp-2);
    font-size: var(--fs-sm);
    color: var(--fg-secondary);
}

.epistemic-separator {
    color: var(--border-secondary);
}

.epistemic-item {
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.epistemic-label {
    color: var(--fg-secondary);
}

.epistemic-value {
    font-weight: 500;
    color: var(--fg-primary);
}

/* Certainty color coding */
.certainty-certain {
    color: #10a37f;
}

.certainty-probable {
    color: #d2980d;
}

.certainty-possible {
    color: #f59e0b;
}

.certainty-uncertain {
    color: #ef4444;
}

.certainty-unspecified {
    color: var(--fg-secondary);
}

/* Attribution - subtle inline */
.epistemic-icon {
    font-size: 13px;
    opacity: 0.7;
    margin-right: 2px;
}

/* =============================================================================
   PROVENANCE SECTION - Green accent for visual distinction
   ============================================================================= */
.provenance-section {
    border-left: 3px solid #10B981;
    padding-left: var(--sp-4);
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    gap: var(--sp-4);
}

.evidence-quote {
    font-style: italic;
    color: var(--fg-primary);
    margin: 0;
    font-size: var(--fs-sm);
    line-height: 1.5;
    flex: 1;
    /* Allow quote to take available space */
}

.source-ids {
    display: flex;
    align-items: center;
    gap: var(--sp-2);
    font-size: var(--fs-xs);
    color: var(--fg-secondary);
    white-space: nowrap;
    /* Keep source IDs from wrapping weirdly if possible */
    flex-shrink: 0;
}

.source-label {
    color: var(--fg-secondary);
}

.source-id-tag {
    font-family: var(--font-mono);
    background: var(--bg-secondary);
    padding: 2px 6px;
    border-radius: var(--radius-inline);
    color: var(--fg-primary);
}

.source-separator {
    color: var(--border-secondary);
    margin: 0 var(--sp-1);
}

.extraction-id-footer {
    font-family: var(--font-mono);
    color: var(--fg-secondary);
    opacity: 0.7;
}

/* =============================================================================
   REASONING SECTION - Elegant Accordion
   ============================================================================= */
.reasoning-section {
    margin-top: var(--sp-2);
}

.reasoning-toggle {
    display: flex;
    align-items: center;
    gap: var(--sp-2);
    background: linear-gradient(135deg, rgba(81, 89, 249, 0.06), rgba(81, 89, 249, 0.02));
    border: 1px solid rgba(81, 89, 249, 0.12);
    border-radius: var(--radius-interactive);
    cursor: pointer;
    font-size: var(--fs-sm);
    font-weight: 500;
    color: var(--accent);
    padding: var(--sp-2) var(--sp-3);
    transition: all 0.2s ease;
    width: fit-content;
}

.reasoning-toggle:hover {
    background: linear-gradient(135deg, rgba(81, 89, 249, 0.1), rgba(81, 89, 249, 0.04));
    border-color: rgba(81, 89, 249, 0.2);
    box-shadow: 0 2px 8px rgba(81, 89, 249, 0.1);
}

.toggle-chevron {
    font-size: var(--fs-sm);
    font-weight: 600;
    color: var(--accent);
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.toggle-chevron.expanded {
    transform: rotate(90deg);
}

.reasoning-content {
    margin-top: var(--sp-3);
    padding: var(--sp-4);
    background: linear-gradient(135deg, rgba(81, 89, 249, 0.02) 0%, rgba(81, 89, 249, 0.04) 100%);
    border: 1px solid rgba(81, 89, 249, 0.1);
    border-radius: var(--radius-main);
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--sp-4);
    animation: reasoningSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes reasoningSlideIn {
    from {
        opacity: 0;
        transform: translateY(-12px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.reasoning-item {
    display: flex;
    flex-direction: column;
    gap: var(--sp-1);
    padding-left: var(--sp-3);
    border-left: 2px solid var(--accent);
}

.reasoning-label {
    font-size: var(--fs-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    color: var(--accent);
}

.reasoning-text {
    font-size: var(--fs-sm);
    color: var(--fg-primary);
    line-height: 1.6;
}

/* =============================================================================
   RESPONSIVE
   ============================================================================= */
@media (max-width: 768px) {
    .ontology-triple {
        flex-direction: column;
    }

    .relation-connector {
        flex-direction: row;
        min-width: auto;
        gap: var(--sp-2);
        padding: var(--sp-2) 0;
    }

    .epistemic-row {
        flex-direction: column;
        align-items: flex-start;
    }

    .reasoning-item {
        grid-template-columns: 1fr;
    }
}