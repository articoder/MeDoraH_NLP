<!DOCTYPE html>
<html>
<head>
    <title>Network Debug Test</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        #network { width: 500px; height: 400px; border: 1px solid red; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal-content { margin: 5% auto; width: 80%; height: 80%; background: white; padding: 20px; }
    </style>
</head>
<body>
    <button id="test-btn">Test Network</button>
    <div id="test-modal" class="modal">
        <div class="modal-content">
            <button onclick="document.getElementById('test-modal').style.display='none'">Close</button>
            <h3>Network Test</h3>
            <div id="network"></div>
        </div>
    </div>

    <script>
        // Test data
        const testData = [
            {
                subject_entity: { name: "Alice", entity_type: "PERSON" },
                relation: { semantic_form: "KNOWS", surface_form: "knows" },
                object_entity: { name: "Bob", entity_type: "PERSON" },
                evidence_text: "Alice knows Bob"
            },
            {
                subject_entity: { name: "Bob", entity_type: "PERSON" },
                relation: { semantic_form: "WORKS_AT", surface_form: "works at" },
                object_entity: { name: "Company", entity_type: "ORGANIZATION" },
                evidence_text: "Bob works at Company"
            }
        ];

        console.log('vis object:', typeof vis, vis);
        
        function createTestNetwork() {
            console.log('Creating test network...');
            const container = document.getElementById('network');
            
            if (!container) {
                console.error('Container not found');
                return;
            }
            
            if (typeof vis === 'undefined') {
                console.error('vis.js not loaded');
                return;
            }

            // Create simple nodes and edges
            const nodes = new vis.DataSet([
                { id: 'Alice', label: 'Alice', color: '#ff0000' },
                { id: 'Bob', label: 'Bob', color: '#00ff00' },
                { id: 'Company', label: 'Company', color: '#0000ff' }
            ]);
            
            const edges = new vis.DataSet([
                { from: 'Alice', to: 'Bob', label: 'KNOWS' },
                { from: 'Bob', to: 'Company', label: 'WORKS_AT' }
            ]);
            
            const data = { nodes, edges };
            const options = {};
            
            try {
                const network = new vis.Network(container, data, options);
                console.log('Network created successfully:', network);
            } catch (error) {
                console.error('Error creating network:', error);
            }
        }

        document.getElementById('test-btn').addEventListener('click', () => {
            console.log('Button clicked');
            document.getElementById('test-modal').style.display = 'block';
            setTimeout(createTestNetwork, 100);
        });
    </script>
</body>
</html>